---
import { faqItems } from '@config/faq';
import { generateFAQSchema } from '@utils/seo';

const faqSchema = generateFAQSchema(faqItems);
---

<section id="faq" class="py-20 md:py-28 bg-gray-50">
  <div class="container-custom">
    <!-- Header -->
    <div class="text-center max-w-2xl mx-auto mb-12" data-aos="fade-up">
      <h2 class="font-heading text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        Preguntas Frecuentes
      </h2>
      <p class="text-gray-600 text-lg">Resuelve tus dudas antes de agendar tu cita</p>
    </div>

    <!-- FAQ Accordion -->
    <div class="max-w-3xl mx-auto space-y-4" x-data="{ openItem: null }">
      {
        faqItems.map((item, index) => (
          <div
            class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"
            data-aos="fade-up"
            data-aos-delay={index * 50}
          >
            <button
              class="w-full px-6 py-4 text-left flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors"
              x-on:click={`openItem = openItem === ${index} ? null : ${index}`}
              x-bind:aria-expanded={`openItem === ${index}`}
            >
              <span class="font-heading font-semibold text-gray-900">{item.question}</span>
              <svg
                class="w-5 h-5 text-primary-600 flex-shrink-0 transition-transform duration-300"
                x-bind:class={`{ 'rotate-180': openItem === ${index} }`}
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                />
              </svg>
            </button>
            <div
              class="overflow-hidden transition-all duration-300"
              x-show={`openItem === ${index}`}
              x-collapse
              x-cloak
            >
              <div class="px-6 pb-4 text-gray-600">{item.answer}</div>
            </div>
          </div>
        ))
      }
    </div>
  </div>

  <!-- FAQ Schema -->
  <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
</section>

<style>
  [x-cloak] {
    display: none !important;
  }
</style>
